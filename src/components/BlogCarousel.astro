---
import { getCollection } from 'astro:content';
const posts = await getCollection('blog');
import Swiper from 'swiper';
import 'swiper/swiper-bundle.css';
---

<div class="swiper mySwiper">
  <div class="swiper-wrapper">
    {posts.slice(0, 6).map((post) => (
      <div class="swiper-slide bg-white shadow rounded overflow-hidden">
        <img src={post.data.heroImage} alt={post.data.title} class="w-full h-48 object-cover" />
        <div class="p-4">
          <h3 class="font-bold text-lg mb-1">{post.data.title}</h3>
          <p class="text-sm text-gray-600 mb-2">{post.data.description}</p>
          <a href={`/blog/${post.slug}`} class="text-blue-600 font-medium hover:underline">Read More â†’</a>
        </div>
      </div>
    ))}
  </div>
</div>

<script type="module">
  import Swiper from 'swiper';
  new Swiper('.swiper', {
    slidesPerView: 1,
    spaceBetween: 20,
    breakpoints: {
      640: { slidesPerView: 1 },
      768: { slidesPerView: 2 },
      1024: { slidesPerView: 3 },
    },
    loop: true,
    autoplay: { delay: 5000 },
  });
</script>
